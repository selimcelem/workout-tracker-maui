<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="WorkoutTracker.Views.ChartsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Maui;assembly=LiveChartsCore.SkiaSharpView.Maui"
    Title="Progress">

    <!-- Grid ensures the chart gets real height on Android -->
    <Grid RowDefinitions="Auto,*,Auto" Padding="16" RowSpacing="12">

        <!-- Picker row -->
        <Picker Grid.Row="0"
                Title="Exercise"
                ItemsSource="{Binding Exercises}"
                ItemDisplayBinding="{Binding Name}"
                SelectedItem="{Binding SelectedExercise}" />

        <!-- Chart row (stretches) -->
        <lvc:CartesianChart Grid.Row="1"
                            Series="{Binding VolumeSeries}"
                            XAxes="{Binding XAxes}"
                            YAxes="{Binding YAxes}"
                            Margin="0,8,0,0" />

        <!-- Diagnostics/status row -->
        <VerticalStackLayout Grid.Row="2" Spacing="6">
            <Label Text="{Binding StatusText}" FontAttributes="Bold" />

            <!-- Optional: show computed points for debugging -->
            <CollectionView ItemsSource="{Binding DebugPoints}" HeightRequest="120">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout Spacing="8" Padding="4,2">
                            <Label Text="{Binding Day, StringFormat='{}{0:MMM dd}'}" />
                            <Label Text="-" />
                            <Label Text="{Binding Volume, StringFormat='{}{0:0} kg'}" />
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>

    </Grid>
</ContentPage>
