<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:WorkoutTracker.ViewModels"
             x:Class="WorkoutTracker.Views.ExercisesPage"
             x:Name="ExercisesPageRoot"
             Title="Exercises">

    <VerticalStackLayout Padding="16" Spacing="12">
        <!-- New exercise input and button -->
        <Grid ColumnDefinitions="*,Auto">
            <Entry Placeholder="New exercise name" Text="{Binding NewExerciseName}" />
            <Button Grid.Column="1" Text="Add" Command="{Binding AddCommand}" />
        </Grid>
        
        <!-- Exercise list -->
        <ScrollView>
            <CollectionView ItemsSource="{Binding Items}"
                    SelectionMode="None"
                    Margin="0,0,0,40">

                <CollectionView.EmptyView>
                    <Label Text="No exercises added yet."
                   Opacity="0.6"
                   HorizontalOptions="Center"
                   Margin="0,24,0,0"/>
                </CollectionView.EmptyView>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <SwipeView>
                            <SwipeView.RightItems>
                                <SwipeItems Mode="Reveal">
                                    <SwipeItem
                                Text="Delete"
                                BackgroundColor="IndianRed"
                                Command="{Binding Source={RelativeSource AncestorType={x:Type vm:ExercisesViewModel}}, Path=DeleteCommand}"
                                CommandParameter="{Binding Id}" />

                                    <SwipeItem
                                Text="Assign"
                                BackgroundColor="DodgerBlue"
                                Command="{Binding BindingContext.AssignToCategoryCommand, Source={x:Reference ExercisesPageRoot}}"
                                CommandParameter="{Binding}" />
                                </SwipeItems>
                            </SwipeView.RightItems>

                            <Grid ColumnDefinitions="*,Auto" Padding="8">
                                <Label Text="{Binding Name}" VerticalOptions="Center" />
                            </Grid>
                        </SwipeView>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

            </CollectionView>
        </ScrollView>
    </VerticalStackLayout>
</ContentPage>
